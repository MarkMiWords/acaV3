# ACaptiveAudience.net - Writing Assistant

> **Project Status:** Pre-Alpha / Initial Infrastructure scaffolding.

## About The Mission

This project aims to build a digital writing assistant specifically designed to empower current and formerly incarcerated individuals to tell their stories for **acaptiveaudience.net**.

Writing offers a path toward rehabilitation, processing trauma, and connecting with the outside world. However, many in this demographic face significant barriers, including limited literacy resources, lack of access to digital tools, and environments not conducive to creative focus.

We are building a secure, accessible web application that leverages generative AI (via a secure backend) to act as a writing partnerâ€”helping with prompts, structuring narratives, and overcoming writer's block, while ensuring the user's voice remains central.

---

## Technical Architecture

This project is built on a "production-ready" Firebase scaffolding designed for security, scalability, and ease of maintenance.

*   **Frontend:** Plain HTML, CSS, and Vanilla JavaScript (`/public`).
    *   *Why:* Kept intentionally simple to ensure maximum compatibility with older devices, limited browsers, or low-bandwidth environments often found in institutional settings. No complex build steps or heavy frameworks on the client side.
*   **Backend:** Node.js Express Server running on Firebase Cloud Functions v2 (TypeScript) (`/functions`).
    *   *Why:* Handles all logic securely away from the client. It is the single gateway for AI interaction.
*   **Security:** API Keys (e.g., Gemini) are stored securely in Google Cloud Secret Manager and injected only into the backend runtime environment. They are never exposed to the client browser.
*   **Routing:** Firebase Hosting rewrites direct `/api/*` traffic automatically to the backend Cloud Function.

---

## Production & Design Considerations for our User Base

Developing for this demographic requires a specific mindset. Please keep these notes in mind as we build features:

### 1. Extreme Digital Constraints (Incarcerated Users)
*   **Device Limitations:** Users may be accessing this via older tablets (e.g., JPay, GTL devices) with outdated browser engines and limited processing power. Keep the frontend lightweight. Avoid heavy JS libraries.
*   **Bandwidth & Time:** Internet access is often slow, intermittent, and timed (e.g., 30-minute slots). The app must load fast, save state frequently, and handle dropped connections gracefully.
*   **UI Clarity:** Interfaces should be intuitive and high-contrast. Avoid confusing UX patterns.

### 2. Privacy and Safety
*   **Data Sensitivity:** Stories may contain trauma or sensitive legal information. Future iterations involving database storage (Firestore) must have rigorous security rules.
*   **Anonymity:** We must design the system to protect user identity unless they explicitly choose to share it.

### 3. AI Safety & Moderation (Backend)
*   **Guardrails:** The backend function interacting with the AI model must have robust prompt engineering to prevent generation of harmful, violent, or illicit content.
*   **Tone:** The AI assistant should adopt an encouraging, non-judgmental tone, acting as a mentor rather than an editor-in-chief.

---

## Getting Started (Development)

Follow these steps to run the project locally.

### Prerequisites

1.  **Node.js:** (Version 18 LTS recommended).
2.  **Firebase CLI:** `npm install -g firebase-tools`
3.  **Firebase Project (Blaze Plan):** You need access to a Firebase project on the **Blaze (pay-as-you-go) plan**. This is required for Cloud Functions and Secret Manager.

### Setup Steps

1.  **Clone and Configure:**
    ```bash
    git clone [YOUR_REPO_URL]
    cd [YOUR_REPO_NAME]
    ```
    *Edit the `.firebaserc` file in the root directory and change `"YOUR_PROJECT_ID"` to your actual Firebase project ID.*

2.  **Install Backend Dependencies:**
    ```bash
    npm install --prefix functions
    ```

3.  **Set Secure API Keys:**
    This project uses Cloud Secret Manager. You must set the AI service API key before the backend will function.
    ```bash
    # Paste your actual API key when prompted
    firebase functions:secrets:set GEMINI_API_KEY
    ```
    *(Note: You may be prompted to enable Cloud APIs the first time you run this.)*

### Running Locally

Use the Firebase Emulator Suite to run the full stack (frontend hosting and backend functions) locally. The backend automatically compiles TypeScript before starting due to pre-deploy hooks in `firebase.json`.

```bash
firebase emulators:start